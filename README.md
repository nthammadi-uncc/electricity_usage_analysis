# Analysis of Air pollutants through Electricity usage and generation across all states of America
This repository hosts all files created as part of the final project for the DSBA-6156 Applied Machine Learning course for Fall 2021 semester.

### TEAM MEMBERS:
1. Naomi Thammadi
2. Vathsavi Venkat
3. Yash Patel

## Project Motivation
Even with the advancement of alternate fuels, fossil fuels are still used in many states across USA. <a href="https://www.eia.gov/">U.S Energy Information Administration</a> provides a vast amount of data and statistics about Electricity usage, generation, price, carbon dioxide and other air pollutant emissions over the years. It was this data that provided the motivation for this project to understand trends in these statistics. The goal of this project is to understand if Air pollutant emissions(Carbon dioxide, sulphur dioxide and nitrogen oxides) are more in concentration in states that use or generate certain sources of electricity and if the Ruling government(Democratic or Republic) or the change in ruling government has any correlation to these concentrations of air pollutants

## Research Question
Does the ruling government(Democratic or Republic) or the change in the ruling goverment along with types of Electricity Generations, Consumptions, Price and the median income of a state have a correlation with the concentration of Air Pollutants emitted?

## Data Sources
1. https://www.eia.gov/electricity/data/state/
2. https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/42MVDX
3. https://www.census.gov/data/tables/time-series/demo/income-poverty/historical-income-households.html

## Data Gathering

Data files were gathered as CSV files and all fomatting was initially removed in excel. This included any information rows about the source of data that was included at the first row of the sheet. All files have data ranging from the year 2001-2019 across USA. List of data files are:
1. Electricity Prices 
2. Annual Customers
3. Annual Revenue Generated by Electricity
4. Monthly consumption of Electricity through different sources
5. Monthly generation of Electricity from different sources
6. Annual Air pollutant emissions
7. Median Household Income
8. Presidential Election results

## Data Visualization

Data Visualizations have been done on Tableau. [Electricity Exploration](https://public.tableau.com/app/profile/yash.patel3569/viz/Book1_16394607865240/Story1?publish=yes)


## Data Preprocessing

Below data preprocessing has been performed:
1. Monthly consumption and generation of Electricity datafile were grouped on yearly basis to match in timeframe to all other files
2. PRICE_INFLATION_RATE is calculated to check the increase/decrease in price of electricity per year with respect to the state
3. ELECTRICITY_REVENUE_GROWTH is calculated to check the increase/decrease in revenue generated by electricity per year  with respect to the state
4. Median Household Income data was transposed to match the timeline format of the rest of the files
5. CHANGE_IN_GOVT is calculated to determine if there has been a change in ruling government from previous election term to next election term
6. Data Normalization was performed on all columns with decimal numbers using a MinMaxScalar 

### Data Merge and Final Dataset

All data files were merged based on YEAR and STATE to create the final dataset used for modeling. Final dataset has 969 rows and 30 features
1. YEAR: Year ranging from 2001 to 2019
2. STATE: Abbreviation of State
3. STATE_NAME: Name of the State
4. ELECTION_RESULT: This shows if the state during that year was under Republic(RED) or Democratic(BLUE) government
5. CHANGE_IN_GOVT: This binary field has 0 if there is no change in government from the previous election term and has 1 if there is a change

Features 6-19 are related to Electricity Generation

6. COAL
7. GEOTHERMAL
8. HYDROELECTRIC CONVENTIONAL
9. NATURAL GAS
10. NUCLEAR
11. OTHER
12. OTHER BIOMASS
13. OTHER GASES
14. PETROLEUM
15. PUMPED STORAGE
16. SOLAR THERMAL AND PHOTOVOLTAIC
17. WIND
18. WOOD AND WOOD DERIVED FUELS
19. GENERATION_TOTAL: Total Electricity generated in the state during the year through all Energy sources

Features 20-24 are related to Electricity Consumption

20. COAL (SHORT TONS)
21. GEOTHERMAL (BILLION BTU)
22. NATURAL GAS (MCF)
23. OTHER GASES (BILLION BTU)
24. PETROLEUM (BARRELS)

25. Median Income: Median Income of the state during the year
26. PRICE_INFLATION_RATE: Rate at which the price of Electricity has been since the previous year
27. ELECTRICITY_REVENUE_GROWTH: Growth of Revenue generated through Electricity

Features 27-30 are related to Emissions - Carbondioxide, Sulphurdioxide and Nitricoxide in the state through the year

28. Carbon_dioxide(MT)
29. Sulphur_dioxide(MT)
30. Nitrogen_oxide(MT)

## Data Preparation for Modeling

ELECTION_RESULT is encoded using Label Encoder into a new feature called RULING_PARTY

## Modeling

Two Predictive Models are created for :
1. Predicting Air pollutants(Carbon_dioxide(MT), Sulphur_dioxide(MT), Nitrogen_oxide(MT)) using a Multi-Output Regressor and XGBoost Regressor
2. Predicting RULING_PARTY using Random Forest Classifier

### Feature Selection
Feature Selection is performed using:
1. SelectKBest
2. Recursive Feature Elimination and Cross-Validation Selection

## Evaluation

### Predicting emissions using XGBoost Regressor

By running the model using Multi-Output Regressor with XGBoost Regressor, we could predict 96% of the Validation dataset accurately and 86% of the Test dataset accurately
![image](https://user-images.githubusercontent.com/77910160/145752029-0a7bce0f-9e9a-4df3-b449-9ed99c2924da.png)

![image](https://user-images.githubusercontent.com/77910160/145757646-abd7ee42-d0d8-4ff5-a857-207c42d447e2.png)


The model was tested on both Validation and test datasets that it has never seen before and for both of these the accuracy% is good which shows that the model is a good fit for the data(not overfitted)

We got an R-squared of 96% with the validation data sets and an R-squared of 86% with the test datasets. The model can explain 96% of variance in the three target variables for the validation dataset and 86% of the variance for the test dataset. 

### Predicting Ruling party using Random Forest Classifier

By running the Random Forest Classifier on all features and with selected best features, we observe that the model predicts the test dataset with atleast 89% accuracy 

## Results

Our prediction models align with our research question that the concentration of air pollutants are correlated to the different sources of consumption and generation of Electricity, Ruling party and change in government. The accuracy scores of the models show that the data was not overfit since the prediction model was tested on both validation and test datasets that gave a decent accuracy score. 

## Improvements and Future Work

1. Data for the year 2020 was removed because of inconsitency during COVID-19 pandemic. This can be included to see how well the model performs even during uncertain conditions
2. Emission rates can be forcasted to see which states are at a higher risk of air pollution and should resort to alternate fuels
3. Data related to global warming and ozone depletion can be include to find correlations and forecast possible warnings to particular states
